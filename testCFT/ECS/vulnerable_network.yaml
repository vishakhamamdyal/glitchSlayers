AWSTemplateFormatVersion: '2010-09-09'
Description: secure VPC with security groups
Resources:
  SecureSubnet:
    Properties:
      CidrBlock: 10.0.1.0/24
      VpcId:
        Ref: SecureVPC
    Type: AWS::EC2::Subnet
  SecureVPC:
    Properties:
      CidrBlock: 10.0.0.0/16
      Tags:
      - Key: Name
        Value: SecureVPC
    Type: AWS::EC2::VPC
  RestrictedSecurityGroup:
    Properties:
      GroupDescription: Allow only necessary traffic
      SecurityGroupIngress:
      - CidrIp: 10.0.0.0/16
        FromPort: 80
        IpProtocol: tcp
        ToPort: 80
      VpcId:
        Ref: SecureVPC
    Type: AWS::EC2::SecurityGroup
